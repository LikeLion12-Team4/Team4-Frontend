<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <title>카카오 로그인 처리</title>
  </head>
  <body>
    <!-- <script>
      // SDK 초기화
      Kakao.init("bc722e2b433f46dd008869cc117eeb18");
      console.log(Kakao.isInitialized()); // true가 출력되어야 함

      // URL에서 인가 코드 추출
      const urlParams = new URLSearchParams(window.location.search);
      const authCode = urlParams.get("code");
      console.log(authCode);

      // 인가 코드가 존재하는지 확인
      if (authCode) {
        var formdata = new FormData();
        formdata.append("code", authCode);

        // 서버에 로그인 요청을 보냅니다.
        var requestOptions = {
          method: "POST",
          body: formdata,
          redirect: "follow",
        };

        fetch(
          `http://3.37.18.8:8000/kakao/login/finish?code=${authCode}`,
          requestOptions
        )
          .then((response) => {
            if (!response.ok) {
              throw new Error(
                "Network response was not ok " + response.statusText
              );
            }
            return response.json();
          })
          .then((data) => {
            // 로그인 성공 시 토큰을 로컬 스토리지에 저장
            localStorage.setItem("access_token", data.access_token);
            localStorage.setItem("refresh_token", data.refresh_token);

            // 메인 페이지로 리다이렉트
            window.location.replace("main.html");
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      } else {
        console.error("Authorization code not found");
      }
    </script> -->
    <script src="../../js/pages/kakao-login.js"></script>
  </body>
</html>
